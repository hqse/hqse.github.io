<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">html,body,#map_canvas{width: 100%;height: 100%;overflow: hidden;margin:0;}</style>
<script charset="utf-8" src="http://map.qq.com/api/js?v=2.exp"></script>
<script language="javascript">
var $D=document;
function $(i){return $D.getElementById(i);}
var map;
var mmp; 
var minfo;
var zoomLevel = 9;
var markersArray = [];
var polylinesArray = [];

function initialize()
{
minfo = $("info");
mmp = $("mp"); 
minfo.innerHTML=zoomLevel;
map = new qq.maps.Map(document.getElementById("map_canvas"),{mapTypeId:qq.maps.MapTypeId.SATELLITE,center:new qq.maps.LatLng(30.558462,114.274294),zoom:zoomLevel,panControl:false,zoomControl:false,scaleControl:true,scaleControlOptions:{position:qq.maps.ControlPosition.LEFT_CENTER},draggableCursor:'img/c1.cur',draggingCursor:'img/c2.cur'});
qq.maps.event.addListener(map,'zoom_changed',function(){zoomLevel = map.getZoom();minfo.innerHTML=zoomLevel;});
qq.maps.event.addListener(map,'click',function(event){mmp.value = event.latLng.getLng() + '|' + event.latLng.getLat();});
       
} 

function setmZ(){
var t=parseInt($("mz").value);
map.zoomTo(t);
}

function mup(){
map.zoomBy(1);
}


function mdown(){
map.zoomBy(-1);
}

function addOver(){
var b = mmp.value.split("|");
var i = parseFloat(b[0]);
var j = parseFloat(b[1]);
var marker = new qq.maps.Marker({position:new qq.maps.LatLng(j,i),map:map});
markersArray.push(marker);
map.panTo(new qq.maps.LatLng(j,i));
}

function clearOver(){
for(var i=0; i < markersArray.length; i++)markersArray[i].setMap(null);
for(var i=0; i < polylinesArray.length; i++)polylinesArray[i].setMap(null);
markersArray = [];
polylinesArray = [];
}

function addOver2(){
var t = mmp.value.split("|");
mmp.value ="";
var i,j,k,l;
i = parseFloat(t[0]);
j = parseFloat(t[1]);
k = parseFloat(t[2]);
l = parseFloat(t[3]);
var path1=[
new qq.maps.LatLng(i,j),
new qq.maps.LatLng(i,l),
new qq.maps.LatLng(k,l),
new qq.maps.LatLng(k,j),
new qq.maps.LatLng(i,j)
];
var polyline = new qq.maps.Polyline({path:path1,strokeColor:'#FF0000',strokeWeight:4,editable:false,map:map});
polylinesArray.push(polyline);
var bounds = new qq.maps.LatLngBounds(new qq.maps.LatLng(k,j),new qq.maps.LatLng(i,l));
map.fitBounds(bounds);
}

</script>
<title>腾讯地图【GCJ-02】</title>
</head>
<body onload="initialize()">
<div style="width: 100%;height: 40px;overflow: hidden;margin:0;">
<p align=right><font color=red><b>层：</b></font><span id="info"></span>&nbsp;
<input type=button id=upd onclick=mup() value=放>
<input type=button id=dnd onclick=mdown() value=缩>
<input type=text value="14" id=mz size=1> <input type=button onclick=setmZ() value=层 id=mzb>
<input type=text value="武汉" id=mcity size=6> <input type=button onclick=getBoundary() value=区>
<input type=text value="" id=mp> <input type=button onclick=addOver2() value=显示 id=mpb> <input type=button onclick=clearOver() value=清>
</p></div><div id="map_canvas"></div>
</body></html>
